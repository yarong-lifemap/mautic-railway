<Directory /var/www/html>
    # Keep open_basedir permissive enough for Mautic/Symfony.
    # NOTE: Must be a single line; broken newlines here can produce confusing log output.
    php_admin_value open_basedir "/var/www/html:/data:/tmp"

    # Force session + temp dirs to a writable path (Railway persistent volume for web role).
    php_admin_value session.save_path "/data/tmp"
    php_admin_value sys_temp_dir "/data/tmp"
    php_admin_value upload_tmp_dir "/data/tmp"

    # Some PHP code still probes /tmp; ensure it's writable and within open_basedir.
    # Also ensure PHP sees TMP/TEMP env vars.
    SetEnv TMPDIR /data/tmp
    SetEnv TMP /data/tmp
    SetEnv TEMP /data/tmp
</Directory>

ServerName localhost
